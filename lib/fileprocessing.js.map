{"version":3,"sources":["../src/fileprocessing.js"],"names":["files","tresCoords","treasures","_onFileSelected","processed_arr","results","result","add","coordinates","set","treasure","onChange","promise","Promise","resolve","arr_promises","i","length","file","push","pFileReader","all","reader","FileReader","reject","onload","evt","target","readyState","DONE","JSON","parse","readAsText"],"mappings":";;;;;;;;uEAKO,iBAAwBA,KAAxB,EAA+BC,UAA/B,EAA2CC,SAA3C;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAE2BC,gBAAgBH,KAAhB,CAF3B;;AAAA;AAEKI,qCAFL;AAAA;AAAA;AAAA;AAAA;AAAA,oCAGoBA,aAHpB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAGSC,+BAHT;;AAIK,6CAAM,MAAN,EAAaA,OAAb;AAJL;AAAA;AAAA;AAAA;AAKK,0CAAkBA,OAAlB,2HAA0B;AAAlBC,kCAAkB;;AACtBL,uCAAWM,GAAX,CAAeD,OAAOE,WAAtB;AACAN,sCAAUO,GAAV,CAAcH,OAAOE,WAArB,EAAiCF,OAAOI,QAAxC;AACH;AARN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAWC,6CAAM,MAAN,EAAc,6BAAd;;AAXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAeC,Q;;;;;AALtB;;AACA;;AAEA;;;;AAiBA,SAASR,eAAT,CAAyBH,KAAzB,EAA+B;AAC5B,QAAIY,UAAUC,QAAQC,OAAR,EAAd;AACC,QAAIC,eAAa,EAAjB;AACA,SAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEhB,MAAMiB,MAApB,EAA2BD,GAA3B,EAA+B;AAC3B,YAAIE,OAAKlB,MAAMgB,CAAN,CAAT;AACAD,qBAAaI,IAAb,CAAkBC,YAAYF,IAAZ,CAAlB;AACH;AACD,WAAOL,QAAQQ,GAAR,CAAYN,YAAZ,CAAP;AACH;;AAED,SAASK,WAAT,CAAqBF,IAArB,EAA0B;AACtB,QAAII,SAAO,IAAIC,UAAJ,EAAX;AACA,WAAO,IAAIV,OAAJ,CAAY,UAACC,OAAD,EAASU,MAAT,EAAkB;AACrCF,eAAOG,MAAP,GAAc,UAASC,GAAT,EAAa;AACvB,gBAAGA,IAAIC,MAAJ,CAAWC,UAAX,IAAuBL,WAAWM,IAArC,EAA0C;AACtCf,wBAAQgB,KAAKC,KAAL,CAAWL,IAAIC,MAAJ,CAAWrB,MAAtB,CAAR;AACH;AACJ,SAJD;AAKA,YAAGY,IAAH,EAAQ;AACJI,mBAAOU,UAAP,CAAkBd,IAAlB,EAAuB,OAAvB;AACH;AACJ,KATU,CAAP;AAUH","file":"fileprocessing.js","sourcesContent":["import \"babel-core/register\";\r\nimport \"babel-polyfill\";\r\n\r\nimport {print} from './addition.js';\r\n\r\nexport async function onChange(files, tresCoords, treasures){\r\n    try{\r\n        var processed_arr = await _onFileSelected(files);\r\n        for(var results of processed_arr){\r\n            print(\"file\",results);\r\n            for(var result of results){\r\n                tresCoords.add(result.coordinates);\r\n                treasures.set(result.coordinates,result.treasure);\r\n            }        \r\n        }\r\n    }catch(e){\r\n        print(\"file\", \"reading error\"+e);\r\n    }\r\n}\r\n\r\nfunction _onFileSelected(files){\r\n   var promise = Promise.resolve();\r\n    var arr_promises=[];\r\n    for(var i=0;i<files.length;i++){\r\n        var file=files[i];\r\n        arr_promises.push(pFileReader(file));\r\n    }\r\n    return Promise.all(arr_promises);\r\n}\r\n\r\nfunction pFileReader(file){\r\n    var reader=new FileReader();\r\n    return new Promise((resolve,reject)=>{\r\n    reader.onload=function(evt){\r\n        if(evt.target.readyState==FileReader.DONE){\r\n            resolve(JSON.parse(evt.target.result));\r\n        }\r\n    }\r\n    if(file){\r\n        reader.readAsText(file,\"UTF-8\")\r\n    }\r\n});\r\n}"]}